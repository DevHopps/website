---
layout: none
---
<html>
	<head>
		<style>
			body {
				background: #FFF;
				overflow: hidden;
			}

			canvas {
				display: block;
			}
		</style>
	</head>
	<body>
		<canvas id="canvas"></canvas>
	</body>
	<script>
		var canvas,
			ctx,
			width,
			height,
			size,
			lines,
			tick;

		function line() {
			var x = rand(0, width);
			var y = rand(0, height)
			this.path = [];
			this.speed = 0.3;
			this.count = 100;
			this.x = x;
			this.y = y;
			this.target = { x: x + 1, y: y };
			this.dist = 0;
			this.angle = 0;
			this.life = 1;
			this.updateAngle();
			this.updateDist();
		}

		line.prototype.step = function( i ) {
			this.x += Math.cos( this.angle ) * this.speed;
			this.y += Math.sin( this.angle ) * this.speed;
			
			this.updateDist();
			
			if( this.dist <= this.speed ) {
				this.x = this.target.x;
				this.y = this.target.y;
				this.changeTarget();
			}
				
			this.path.push( { x: this.x, y: this.y } );	
			if( this.path.length > this.count ) {
				this.path.shift();
			}
			
			if( this.x < 0 || this.x > width || this.y < 0 || this.y > height) {
				this.life -= 0.0001;
				if(this.life < 0) {
					this.path = null;
					lines.splice( i, 1 );

					lines.push( new line());
				}
			} else {
				this.life = 1;
			}
		};

		line.prototype.updateDist = function() {
			var dx = this.target.x - this.x,
				dy = this.target.y - this.y;
			this.dist = Math.sqrt( dx * dx + dy * dy );
		}

		line.prototype.updateAngle = function() {
			var dx = this.target.x - this.x,
				dy = this.target.y - this.y;
			this.angle = Math.atan2( dy, dx );
		}

		line.prototype.changeTarget = function() {
			var randStart = randInt( 0, 3 );
			switch( randStart ) {
				case 0: // up
					this.target.y = this.y - size;
					break;
				case 1: // right
					this.target.x = this.x + size;
					break;
				case 2: // down
					this.target.y = this.y + size;
					break;
				case 3: // left
					this.target.x = this.x - size;
			}
			this.updateAngle();
		};

		line.prototype.draw = function( i ) {
			ctx.beginPath();
			var rando = rand( 0, 10 );
			for( var j = 0, length = this.path.length; j < length; j++ ) {
				ctx[ ( j === 0 ) ? 'moveTo' : 'lineTo' ]( this.path[ j ].x, this.path[ j ].y );
			}
			ctx.strokeStyle = '#DA4939';
			ctx.lineWidth = 2;
			ctx.stroke();
		};

		function rand( min, max ) {
			return Math.random() * ( max - min ) + min;
		}

		function randInt( min, max ) {
			return Math.floor( min + Math.random() * ( max - min + 1 ) );
		};

		function init() {
			canvas = document.getElementById( 'canvas' );
			ctx = canvas.getContext( '2d' );
			size = 30;
			lines = [];
			reset();
			loop();
		}

		function reset() {
			width = Math.ceil( window.innerWidth / 2 ) * 2;
			height = Math.ceil( window.innerHeight / 2 ) * 2;
			tick = 0;
			
			lines.length = 0;	
			canvas.width = width;
			canvas.height = height;

			create();
		}

		function create() {
			for(var i = 0; i < 100; i++) {
				lines.push( new line());
			}
		}

		function step() {
			var i = lines.length;
			while( i-- ) {
				lines[ i ].step( i );	
			}
		}

		function clear() {
			ctx.globalCompositeOperation = 'destination-out';
			ctx.fillStyle = 'hsla(0, 0%, 0%, 1';
			ctx.fillRect( 0, 0, width, height );
			ctx.globalCompositeOperation = 'lighter';
		}

		function draw() {
			ctx.save();
			var i = lines.length;
			while( i-- ) {
				lines[ i ].draw( i );	
			}
			ctx.restore();
		}

		function loop() {
			requestAnimationFrame( loop );
			step();
			clear();
			draw();
			tick++;
		}

		window.addEventListener( 'resize', reset );

		init();
	</script>
</html>